%
% University of Udine LaTeX Utility Package
%
% Original file by Nicola Gigante
% modified by Marco Peressotti
%
% This file is in the public domain
%
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{uniud}[%
2015/04/23 v0.1 University of Udine LaTeX Utility Package%
]

\RequirePackage{etoolbox}
\RequirePackage{xparse}
\RequirePackage{translations}

%
%
%
\newcommand\uniudsetdefaults{
	% check if the macro is expanded after the preamble
	\ifx\@onlypreamble\@notprerr
		\PackageError{uniud}{\noexpand\uniudsetdefaults can be used only in the preamble}
	\else
	\uniudset{
		institution=\uniudname{uniud},
		department=\uniudname{dima},
		course=\uniudname{dima/informatica},
		logo={graphics/pollo.pdf},
	}
	\fi
}

%
% Macros to register institutional names. Supported languages are italian
% and english

\newcommand\newuniudname[3][]{
  \csuse{newuniudname@#1}{#2}{#3}
}

\newcommand\newuniudname@[2]{
  \DeclareTranslationFallback{#1}{#2}
}

\newcommand\newuniudname@italian[2]{
  \DeclareTranslationFallback{#1}{#2}
}

\newcommand\newuniudname@english[2]{
  \DeclareTranslation{english}{#1}{#2}
}

\DeclareDocumentCommand\uniudname{s o m}{%
	% starred version force lowercase
	\IfValueTF{#1}{%
	  \IfNoValueTF{#2}{%
	    \GetLCTranslation{#3}%
	  }{%
	    \GetLCTranslationFor{#2}{#3}%
	  }%
	}{%
	  \IfNoValueTF{#2}{%
	    \GetTranslation{#3}%
	  }{%
	    \GetTranslationFor{#2}{#3}%
	  }%
	}%
}

%
% Institutional names
%

\newuniudname[italian]{uniud}{Universit\`a degli Studi di Udine}
\newuniudname[english]{uniud}{University of Udine}

%
% DIMA
%
\newuniudname[italian]{dima}{Scienze Matematiche Informatiche e Fisiche}
\newuniudname[english]{dima}{Mathematics, Computer Science and Physics}

% Bechelor
\newuniudname[italian]{dima/informatica}{Informatica}
\newuniudname[english]{dima/informatica}{Computer Science}

\newuniudname[italian]{dima/matematica}{Matematica}
\newuniudname[english]{dima/matematica}{Mathematics}

\newuniudname[italian]{dima/stm}{Scienze e Tecnologie Multimediali}
\newuniudname[english]{dima/stm}{Multimedia Science and Technology}

\newuniudname[italian]{dima/twm}{Tecnologie Web e Multimediali}
\newuniudname[english]{dima/twm}{Multimedia and Web Technologies}

% Master (which are not also bachelors)
\newuniudname[italian]{dima/informatica-internazionale}{%
  Informatica Internazionale%
}
\newuniudname[english]{dima/informatica-internazionale}{%
  Computer Science - International%
}

\newuniudname[italian]{dima/cmti}{%
  Comunicazione Multimediale e Tecnologie dell'Informazione%
}
\newuniudname[english]{dima/cmti}{%
  Multimedia Communication and Information Technologies%
}

\newuniudname[italian]{dima/fisica}{Fisica}
\newuniudname[english]{dima/fisica}{Physics}